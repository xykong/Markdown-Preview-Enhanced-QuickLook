## 1. 调研

- [x] 1.1 统计当前预置的 24 种语言，列出缺失的高频语言（Kotlin、Rust、Ruby、R、MATLAB、Scala、PHP 等）
- [x] 1.2 评估动态 import 语言包的可行性（highlight.js 支持单独 import 各语言）
- [x] 1.3 统计动态加载方案对 Vite 构建产物的影响（chunk 数量、加载时机）
- [x] 1.4 确定最终预置语言扩展列表（目标 40+ 种，含别名映射）

## 2. 测试先行（TDD）

- [x] 2.1 编写测试：Kotlin 代码块被正确高亮（含 Kotlin 特有关键词）
- [x] 2.2 编写测试：Rust 代码块被正确高亮
- [x] 2.3 编写测试：`js` 别名等同于 `javascript`，正确高亮
- [x] 2.4 编写测试：未知语言降级为纯文本，不报错
- [x] 2.5 确认测试初始状态为红（失败）

## 3. 实现

- [x] 3.1 扩展 `web-renderer/src/index.ts` 中的语言注册列表（从 24 种扩展至 40+）
- [x] 3.2 实现语言别名映射 Map（`js→javascript`、`py→python`、`ts→typescript` 等）
- [x] 3.3 实现动态按需加载逻辑：若代码块语言不在预置列表，尝试动态 import 对应语言包
- [x] 3.4 实现优雅降级：动态加载失败时，代码块以纯文本显示

## 4. 验证

- [x] 4.1 运行 `npm test` 确认所有测试绿色通过
- [x] 4.2 手动验证：含 Kotlin、Rust、R 等语言的代码块正确着色
- [x] 4.3 验证 bundle 体积不显著增大（对比优化前后 index.js 大小）
- [x] 4.4 验证未知语言代码块显示正常（不崩溃，不报错）
- [x] 4.5 运行 `npm run build` 确认构建正常
